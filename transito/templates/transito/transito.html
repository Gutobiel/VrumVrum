{% extends 'base.html' %}

{% load static %}

{% block title %}Trânsito{% endblock title %}

{% block head %} 
{% block additional_css %}
<link rel="stylesheet" href="{% static 'css/styles.css' %}">
<link rel="stylesheet" href="{% static 'css/transito.css' %}">
<style>
    /* Estilos para o botão intermitente */
    #intermitente-btn {
        padding: 10px 20px;
        font-size: 16px;
        background-color: #f0f0f0;
        border: 2px solid #ccc;
        cursor: pointer;
        transition: background-color 0.3s;
    }

    /* Classe para o efeito de piscar */
    #intermitente-btn.blinking {
        animation: blinkingEffect 0.5s infinite;
    }

    /* Animação de piscar */
    @keyframes blinkingEffect {
        0%, 100% {
            background-color: yellow;
            color: black;
        }
        50% {
            background-color: transparent;
            color: black;
        }
    }
</style>
{% endblock %}
{% endblock %}

{% block content %}
<div class="col-md-9 col-lg-10 px-md-4 mt-3">
    {% block breadcrumbs %}
         {% include 'breadcrumbs.html' with breadcrumb_items=breadcrumb_items %}
    {% endblock %}
</div>
<div class="col-md-9 col-lg-10 px-md-4 title">
    <h2>Trânsito</h2>
    <hr>
</div>

<div id="Transito-Content" class="container">
    <div class="left-section">
        <!-- Mapa -->
        <div id="Mapa-transito">
            <video width="100%" controls>
                <source src="https://drive.google.com/file/d/1HHV8-U58wMZZi9GvM_hrESOngvNZk71O/view?usp=drive_link" type="video/mp4">
                Seu navegador não suporta a tag de vídeo.
            </video>
        </div>

        <p>INSIRA O LOCAL</p>
        <form action="/" method="post">
            <input type="text" name="pesquisa" placeholder="Digite o id do semáforo">
            <button type="submit">Consultar</button>
        </form>

        <div class="buttons text-center col-md-12 mt-4">
            <button class="btn btn-primary btn-sm col-md-4 p-2"><a href="#">AO VIVO</a></button>
            <button class="btn btn-danger btn-sm col-md-4 p-2">GRAVAR</button>
        </div>
    </div>

    <div class="right-section">
        <div class="control-container">
            <h2>CONTROLE</h2>
            <button id="intermitente-btn" class="control-button highlight">TORNAR INTERMITENTE</button>
            <button class="control-button">PROGRAMAR EVENTOS</button>
        </div>

        <div class="report-container">
            <div class="chart">
                <div style="height: 40%;"></div>
                <div style="height: 60%;"></div>
                <div style="height: 50%;"></div>
                <div style="height: 70%;"></div>
            </div>
            <a href="{% url 'relatorio' %}" class="report-button">GERAR RELATÓRIO</a>
        </div>
    </div>
</div>

<!-- Script para tornar o botão intermitente -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const btnIntermitente = document.getElementById('intermitente-btn');

        btnIntermitente.addEventListener('click', function () {
            if (!btnIntermitente.classList.contains('blinking')) {
                btnIntermitente.classList.add('blinking');
                setTimeout(() => {
                    btnIntermitente.classList.remove('blinking');
                }, 5000); // Duração do efeito intermitente (5 segundos)
            }
        });
    });
</script>
{% endblock %}
